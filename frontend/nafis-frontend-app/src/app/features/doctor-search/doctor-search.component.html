<div class="doctors-container">
  @if (loading()) { @for (skeleton of [1,2,3]; track skeleton) {
  <div class="doctor-card skeleton">
    <div class="doctor-info-container">
      <div class="doctor-image skeleton-circle"></div>

      <div class="doctor-details">
        <div class="skeleton-line" style="width: 60%; height: 24px"></div>
        <div class="skeleton-line" style="width: 40%; height: 16px"></div>
        <div class="skeleton-line" style="width: 30%; height: 16px"></div>
        <div class="skeleton-line" style="width: 25%; height: 16px"></div>
      </div>
    </div>

    <div class="contact-info">
      <div class="skeleton-line" style="width: 70%; height: 16px"></div>
      <div class="contact-buttons skeleton-buttons">
        <div class="skeleton-button"></div>
        <div class="skeleton-button"></div>
      </div>
    </div>
  </div>
  } } @else { @for (doctor of doctors(); track doctor.id) {
  <div class="doctor-card">
    <div class="doctor-info-container">
      <div class="doctor-image clickable" routerLink="/doctor-profile">
        <img
          [ngSrc]="doctor.imageUrl"
          [alt]="doctor.prenom + ' ' + doctor.nom"
          width="100"
          height="100"
        />
      </div>

      <div class="doctor-details">
        <h2 class="doctor-name">
          Dr. {{ doctor.prenom }} {{ doctor.nom }}
          <span class="status-badge" [class]="doctor.statut.toLowerCase()">
            {{ doctor.statut }}
          </span>
        </h2>

        <p class="specialties">{{ doctor.specialite }}, {{ doctor.service }}</p>

        <div class="rating-container">
          <span class="rating">{{ doctor.rating.toFixed(1) }}</span>
          @for (star of [1,2,3,4,5]; track star) {
          <span class="star" [class.filled]="star <= doctor.rating">â˜…</span>
          }
          <span class="total-ratings">({{ doctor.totalRatings }} Ratings)</span>
        </div>

        <div class="experience-badge">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"
            />
            <path d="M16 7V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v3" />
          </svg>
          {{ doctor.experience }} Years Experience
        </div>
      </div>
    </div>

    <div class="contact-info">
      <p class="address">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
          <circle cx="12" cy="10" r="3" />
        </svg>
        {{ doctor.address }}
        @if (doctor.distance) {
        <span class="distance">{{ doctor.distance }} miles</span>
        }
      </p>

      <div class="contact-buttons">
        <a [href]="'tel:' + doctor.telephone" class="contact-btn phone">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            />
          </svg>
          Call
        </a>
        <a routerLink="/chat" class="contact-btn phone">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            />
          </svg>
          Message
        </a>
        <button class="contact-btn book">Book Appointment</button>
        @if (doctor.website) {
        <a [href]="doctor.website" target="_blank" class="website-link">
          Visit Website
        </a>
        }
      </div>
    </div>
  </div>
  } }
</div>
