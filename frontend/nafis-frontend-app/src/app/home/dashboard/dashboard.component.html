<div class="p-6">
  <div class="mb-4">
    <select
      class="p-2 border rounded"
      [(ngModel)]="userType"
      (ngModelChange)="loadDashboardStats()">
      <option value="ADMINISTRATIF">Administratif</option>
      <option value="MEDECIN">M√©decin</option>
      <option value="INFIRMIER">Infirmier</option>
      <option value="PATIENT">Patient</option>
    </select>
  </div>

  <div *ngIf="userType === 'ADMINISTRATIF'" class="space-y-6">
    <h2 class="text-2xl font-bold">Tableau de bord administratif</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <app-stat-card
        title="Total Patients"
        [value]="adminStats?.totalPatients || 0"
        icon="üë•"
        description="Patients enregistr√©s"
      ></app-stat-card>
      <app-stat-card
        title="Personnel Total"
        [value]="adminStats?.personnel?.total || 0"
        icon="üë®‚Äç‚öïÔ∏è"
        description="Membres du personnel"
      ></app-stat-card>
      <app-stat-card
        title="Chambres Occup√©es"
        [value]="adminStats?.occupiedRooms || 0"
        icon="üè•"
        description="Sur la capacit√© totale"
      ></app-stat-card>
      <app-stat-card
        title="Alertes"
        [value]="adminStats?.alertesNonAcquittees || 0"
        icon="üîî"
        description="Alertes non acquitt√©es"
      ></app-stat-card>
    </div>
  </div>

  <div *ngIf="userType === 'MEDECIN'" class="space-y-6">
    <h2 class="text-2xl font-bold">Tableau de bord m√©dical</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <app-stat-card
        title="Patients du Jour"
        [value]="medicalStats?.todayPatients || 0"
        icon="üë•"
        description="Rendez-vous aujourd'hui"
      ></app-stat-card>
      <app-stat-card
        title="Alertes Constantes"
        [value]="medicalStats?.vitalSignsAlerts || 0"
        icon="‚öïÔ∏è"
        description="Alertes de surveillance"
      ></app-stat-card>
      <app-stat-card
        title="Consultations"
        [value]="medicalStats?.consultations || 0"
        icon="üìã"
        description="Consultations du jour"
      ></app-stat-card>
      <app-stat-card
        title="Rendez-vous"
        [value]="medicalStats?.appointments || 0"
        icon="üìÖ"
        description="Prochains rendez-vous"
      ></app-stat-card>
    </div>
  </div>
  <div *ngIf="userType === 'PATIENT'" class="space-y-6">
    <h2 class="text-2xl font-bold">Tableau de bord patient</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <app-stat-card
        title="Prochains Rendez-vous"
        [value]="patientStats?.upcomingAppointments || 0"
        icon="üìÖ"
        description="Consultations √† venir"
      ></app-stat-card>
      <app-stat-card
        title="M√©dicaments"
        [value]="patientStats?.medications?.length || 0"
        icon="üíä"
        description="Actuellement prescrits"
      ></app-stat-card>
      <app-stat-card
        title="Alertes Sant√©"
        [value]="patientStats?.healthAlerts || 0"
        icon="‚ö†Ô∏è"
        description="√Ä surveiller"
      ></app-stat-card>
    </div>

    <div class="mt-4">
      <h3 class="text-lg font-medium">Constantes r√©centes</h3>
      <ul class="list-disc pl-5 text-sm">
        <li>Temp√©rature : {{patientStats?.latestVitals?.temperature}}</li>
        <li>Tension : {{patientStats?.latestVitals?.bloodPressure}}</li>
        <li>Rythme cardiaque : {{patientStats?.latestVitals?.heartRate}}</li>
      </ul>
    </div>
  </div>

  <div *ngIf="userType === 'INFIRMIER'" class="space-y-6">
    <h2 class="text-2xl font-bold">Tableau de bord infirmier</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <app-stat-card
        title="Patients Assign√©s"
        [value]="nurseStats?.assignedPatients || 0"
        icon="üë•"
        description="Sous votre responsabilit√©"
      ></app-stat-card>
      <app-stat-card
        title="T√¢ches de Surveillance"
        [value]="nurseStats?.monitoringTasks || 0"
        icon="üìä"
        description="Mesures √† effectuer"
      ></app-stat-card>
      <app-stat-card
        title="Alertes Actives"
        [value]="nurseStats?.activeAlerts || 0"
        icon="üö®"
        description="N√©cessitant attention"
      ></app-stat-card>
      <app-stat-card
        title="Chambres √† Visiter"
        [value]="nurseStats?.roomVisits || 0"
        icon="üè•"
        description="Tourn√©e du jour"
      ></app-stat-card>
    </div>
  </div>
</div>
